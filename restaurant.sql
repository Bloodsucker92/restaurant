-- MySQL Script generated by MySQL Workbench
-- Wed Feb 15 13:54:19 2017
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema Restaurant
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema Restaurant
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `Restaurant` DEFAULT CHARACTER SET utf8 ;
USE `Restaurant` ;

-- -----------------------------------------------------
-- Table `Restaurant`.`User`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Restaurant`.`User` (
  `idClient` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NULL,
  `password` VARCHAR(45) NULL,
  `access` VARCHAR(45) NULL,
  PRIMARY KEY (`idClient`))
  ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Restaurant`.`Course_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Restaurant`.`Course_category` (
  `idCourse_category` INT NOT NULL AUTO_INCREMENT,
  `course_type` VARCHAR(45) NULL,
  PRIMARY KEY (`idCourse_category`))
  ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Restaurant`.`Course`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Restaurant`.`Course` (
  `idProduct` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `course_name` VARCHAR(45) NULL,
  `course_price` VARCHAR(45) NULL,
  `Course_category_idCourse_category` INT NOT NULL,
  PRIMARY KEY (`idProduct`, `Course_category_idCourse_category`),
  INDEX `fk_Course_Course_category1_idx` (`Course_category_idCourse_category` ASC),
  CONSTRAINT `fk_Course_Course_category1`
  FOREIGN KEY (`Course_category_idCourse_category`)
  REFERENCES `Restaurant`.`Course_category` (`idCourse_category`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
  ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Restaurant`.`Order`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Restaurant`.`Order` (
  `idOder` INT NOT NULL AUTO_INCREMENT,
  `Client_idClient` INT NOT NULL,
  `Course_idProduct` INT UNSIGNED NOT NULL,
  `Course_Course_category_idCourse_category` INT NOT NULL,
  PRIMARY KEY (`idOder`, `Client_idClient`, `Course_idProduct`, `Course_Course_category_idCourse_category`),
  INDEX `fk_Oder_Client_idx` (`Client_idClient` ASC),
  INDEX `fk_Order_Course1_idx` (`Course_idProduct` ASC, `Course_Course_category_idCourse_category` ASC),
  CONSTRAINT `fk_Oder_Client`
  FOREIGN KEY (`Client_idClient`)
  REFERENCES `Restaurant`.`User` (`idClient`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Order_Course1`
  FOREIGN KEY (`Course_idProduct` , `Course_Course_category_idCourse_category`)
  REFERENCES `Restaurant`.`Course` (`idProduct` , `Course_category_idCourse_category`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
  ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `Restaurant`.`Check`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `Restaurant`.`Check` (
  `idCheck` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL,
  `total_price` INT NULL,
  `Order_idOder` INT NOT NULL,
  `Order_Client_idClient` INT NOT NULL,
  `User_idClient` INT NOT NULL,
  PRIMARY KEY (`idCheck`, `Order_idOder`, `Order_Client_idClient`, `User_idClient`),
  INDEX `fk_Check_Order1_idx` (`Order_idOder` ASC, `Order_Client_idClient` ASC),
  INDEX `fk_Check_User1_idx` (`User_idClient` ASC),
  CONSTRAINT `fk_Check_Order1`
  FOREIGN KEY (`Order_idOder` , `Order_Client_idClient`)
  REFERENCES `Restaurant`.`Order` (`idOder` , `Client_idClient`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Check_User1`
  FOREIGN KEY (`User_idClient`)
  REFERENCES `Restaurant`.`User` (`idClient`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
  ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `Restaurant`.`User`
-- -----------------------------------------------------
START TRANSACTION;
USE `Restaurant`;
INSERT IGNORE INTO `Restaurant`.`User` (`idClient`, `username`, `password`, `access`) VALUES (1, 'user', '123', 'u');
INSERT IGNORE INTO `Restaurant`.`User` (`idClient`, `username`, `password`, `access`) VALUES (2, 'admin', '123', 'a');
INSERT IGNORE INTO `Restaurant`.`User` (`idClient`, `username`, `password`, `access`) VALUES (3, 'denis', 'denis', 'u');
INSERT IGNORE INTO `Restaurant`.`User` (`idClient`, `username`, `password`, `access`) VALUES (4, 'blackmore', 'blackmore', 'a');
INSERT IGNORE INTO `Restaurant`.`User` (`idClient`, `username`, `password`, `access`) VALUES (5, 'ritchie', 'ritchie', 'u');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Restaurant`.`Course_category`
-- -----------------------------------------------------
START TRANSACTION;
USE `Restaurant`;
INSERT IGNORE INTO `Restaurant`.`Course_category` (`idCourse_category`, `course_type`) VALUES (1, 'appetizer');
INSERT IGNORE INTO `Restaurant`.`Course_category` (`idCourse_category`, `course_type`) VALUES (2, 'drink');
INSERT IGNORE INTO `Restaurant`.`Course_category` (`idCourse_category`, `course_type`) VALUES (3, 'desert');
INSERT IGNORE INTO `Restaurant`.`Course_category` (`idCourse_category`, `course_type`) VALUES (4, 'main course');
INSERT IGNORE INTO `Restaurant`.`Course_category` (`idCourse_category`, `course_type`) VALUES (5, 'soup');
INSERT IGNORE INTO `Restaurant`.`Course_category` (`idCourse_category`, `course_type`) VALUES (6, 'pizza');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Restaurant`.`Course`
-- -----------------------------------------------------
START TRANSACTION;
USE `Restaurant`;
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (1, 'shrimps', '20', 1);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (2, 'spiced olives', '5', 1);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (3, 'goat cheese', '6', 1);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (4, 'long island', '10', 2);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (5, 'vodka Absolute', '3', 2);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (6, 'americano', '2', 2);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (7, 'juice', '2', 2);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (8, 'cheesecake', '4', 3);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (9, 'ice-cream', '5', 3);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (10, 't-bone steak', '14', 4);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (11, 'shark', '20', 4);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (12, 'roasted chicken', '12', 4);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (13, 'minestrone', '4', 5);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (14, 'miso', '4', 5);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (15, 'margaritta', '5', 6);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (16, 'calzone', '6', 6);
INSERT IGNORE INTO `Restaurant`.`Course` (`idProduct`, `course_name`, `course_price`, `Course_category_idCourse_category`) VALUES (17, 'proshutto', '6', 6);

COMMIT;

#
# START TRANSACTION;
# USE `Restaurant`;
# DELETE FROM User WHERE username<>"user" and username<>"admin" and username<>"blackmore";
# COMMIT;
#
# START TRANSACTION;
# USE `Restaurant`;
# SELECT * FROM User;
# COMMIT;


